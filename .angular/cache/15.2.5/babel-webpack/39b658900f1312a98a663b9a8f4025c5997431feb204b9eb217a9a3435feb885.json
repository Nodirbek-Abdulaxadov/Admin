{"ast":null,"code":"import { FormControl, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"src/app/services/subcategory/subcategory.service\";\nimport * as i3 from \"src/app/services/category/category.service\";\nimport * as i4 from \"src/app/services/product/product.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/router\";\nfunction NewProductComponent_option_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 33);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const category_r14 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", category_r14.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", category_r14.name, \" \");\n  }\n}\nfunction NewProductComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 34);\n    i0.ɵɵtext(1, \" Mahsulot turini tanlang! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NewProductComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 34);\n    i0.ɵɵtext(1, \" Maydonni to'ldiring! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NewProductComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 34);\n    i0.ɵɵtext(1, \" Nom kamida 3 ta belgidan iborat bo'lishi kerak! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NewProductComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 34);\n    i0.ɵɵtext(1, \" Maydonni to'ldiring! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NewProductComponent_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 34);\n    i0.ɵɵtext(1, \" Kamida 2 ta belgidan iborat bo'lishi kerak! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NewProductComponent_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 34);\n    i0.ɵɵtext(1, \" 60 ta belgidan oshmasligi kerak! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NewProductComponent_option_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 33);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const subcategory_r15 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", subcategory_r15.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", subcategory_r15.name, \" \");\n  }\n}\nfunction NewProductComponent_div_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 34);\n    i0.ɵɵtext(1, \" Kategoriyani tanlang! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NewProductComponent_div_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 35);\n    i0.ɵɵtext(1, \" To'ldirish ixtiyoriy \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NewProductComponent_div_43_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 34);\n    i0.ɵɵtext(1, \" Maydonni to'ldiring! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NewProductComponent_div_55_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 34);\n    i0.ɵɵtext(1, \" Maydonni to'ldiring! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NewProductComponent_div_56_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 34);\n    i0.ɵɵtext(1, \" Kamida 10 ta belgidan iborat bo'lishi kerak! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NewProductComponent_div_57_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 34);\n    i0.ɵɵtext(1, \" 20 ta belgidan oshmasligi kerak! \");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function (a1) {\n  return [\"/print\", a1];\n};\nexport class NewProductComponent {\n  constructor(formBuilder, subcategoryService, categoryService, productService) {\n    this.formBuilder = formBuilder;\n    this.subcategoryService = subcategoryService;\n    this.categoryService = categoryService;\n    this.productService = productService;\n    this.subcategories = [];\n    this.subcategoriesFilter = [];\n    this.categories = [];\n    this.barcodeIsClean = true;\n    this.name = new FormControl('', [Validators.required, Validators.minLength(3), Validators.maxLength(100)]);\n    this.description = new FormControl('', [Validators.maxLength(200)]);\n    this.madeIn = new FormControl('', [Validators.required, Validators.minLength(2), Validators.maxLength(60)]);\n    this.barcode = new FormControl('', [Validators.required, Validators.minLength(10), Validators.maxLength(20)]);\n    this.warningCount = new FormControl(0, [Validators.required]);\n    this.adminId = new FormControl('');\n    this.categoryId = new FormControl('', [Validators.required, Validators.nullValidator]);\n    this.subcategoryId = new FormControl('', [Validators.required, Validators.nullValidator]);\n    this.addNewForm = this.formBuilder.group({\n      name: this.name,\n      categoryId: this.categoryId,\n      subcategoryId: this.subcategoryId,\n      description: this.description,\n      madeIn: this.madeIn,\n      barcode: this.barcode,\n      warningCount: this.warningCount,\n      adminId: this.adminId\n    });\n  }\n  ngOnInit() {\n    this.subcategoryService.getAll().subscribe(data => {\n      this.subcategories = data;\n      this.subcategoriesFilter = data;\n    });\n    this.categoryService.getAll().subscribe(data => this.categories = data);\n  }\n  focusOnScan() {\n    var element = document.getElementById('barcodeInput');\n    element.focus();\n  }\n  scanned() {\n    var barcode = document.getElementById('barcodeInput');\n    var barcodeImgUrl = 'https://barcodeapi.org/api/128/';\n    barcode.classList.remove('d-none');\n    barcode.src = barcodeImgUrl + barcode.value;\n  }\n  categorySelected() {\n    var categoryId = this.addNewForm.getRawValue().categoryId;\n    this.subcategoriesFilter = this.subcategories.filter(s => s.categoryId == Number(categoryId));\n  }\n  add() {\n    this.productService.add(this.addNewForm.getRawValue());\n  }\n  randomBarcode() {\n    var barcode = document.getElementById('barcode');\n    var barcodeImgUrl = 'https://barcodeapi.org/api/128/';\n    this.productService.getBarcode().subscribe(data => {\n      barcode.classList.remove('d-none');\n      barcode.src = barcodeImgUrl + data;\n      this.addNewForm.controls.barcode.setValue(data);\n    });\n  }\n  getCurrentBarcode() {\n    return this.addNewForm.controls.barcode.value;\n  }\n}\nNewProductComponent.ɵfac = function NewProductComponent_Factory(t) {\n  return new (t || NewProductComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.SubcategoryService), i0.ɵɵdirectiveInject(i3.CategoryService), i0.ɵɵdirectiveInject(i4.ProductService));\n};\nNewProductComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: NewProductComponent,\n  selectors: [[\"app-new-product\"]],\n  decls: 71,\n  vars: 20,\n  consts: [[1, \"container\"], [1, \"card\"], [1, \"card-header\"], [1, \"card-body\"], [1, \"modal-body\", 3, \"formGroup\"], [1, \"row\"], [1, \"col-md-6\"], [1, \"mb-1\", \"mt-3\"], [1, \"form-label\"], [\"formControlName\", \"categoryId\", 1, \"form-select\", 3, \"change\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"form-text text-danger\", 4, \"ngIf\"], [1, \"mb-3\", \"mt-3\"], [\"type\", \"text\", \"placeholder\", \"Mahsulot nomini kiriting\", \"ngModel\", \"\", \"formControlName\", \"name\", 1, \"form-control\"], [\"type\", \"text\", \"placeholder\", \"Masalan: Xitoy\", \"ngModel\", \"\", \"formControlName\", \"madeIn\", 1, \"form-control\"], [\"formControlName\", \"subcategoryId\", 1, \"form-select\"], [\"type\", \"text\", \"placeholder\", \"Mahsulotga izoh yozing\", \"ngModel\", \"\", \"formControlName\", \"description\", 1, \"form-control\"], [\"class\", \"form-text text-success\", 4, \"ngIf\"], [\"type\", \"number\", \"placeholder\", \"Ixtiyoriy\", \"ngModel\", \"\", \"formControlName\", \"warningCount\", 1, \"form-control\", 3, \"value\"], [1, \"d-flex\", \"justify-content-center\"], [\"id\", \"barcode\", \"height\", \"120px\", \"width\", \"auto\", \"alt\", \"\", 1, \"d-none\"], [3, \"routerLink\"], [1, \"mb-3\", \"mt-1\"], [\"type\", \"text\", \"placeholder\", \"000000000000\", \"ngModel\", \"\", \"id\", \"barcodeInput\", \"formControlName\", \"barcode\", 1, \"form-control\", 3, \"keydown\"], [1, \"col-md-2\", 2, \"margin-top\", \"32px\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"bi\", \"bi-upc-scan\", \"me-2\"], [1, \"col-md-3\", 2, \"margin-top\", \"32px\"], [1, \"btn\", \"btn-success\", 3, \"click\"], [1, \"bi\", \"bi-plus-square\", \"me-2\"], [1, \"modal-footer\", \"d-flex\", \"justify-content-center\"], [\"type\", \"button\", \"routerLink\", \"..\", 1, \"btn\", \"btn-secondary\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [3, \"value\"], [1, \"form-text\", \"text-danger\"], [1, \"form-text\", \"text-success\"]],\n  template: function NewProductComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h3\", 2);\n      i0.ɵɵtext(3, \"Yangi mahsulot qo'shish\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 3)(5, \"form\", 4)(6, \"div\", 5)(7, \"div\", 6)(8, \"div\", 7)(9, \"label\", 8);\n      i0.ɵɵtext(10, \"Mahsulot turi\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"select\", 9);\n      i0.ɵɵlistener(\"change\", function NewProductComponent_Template_select_change_11_listener() {\n        return ctx.categorySelected();\n      });\n      i0.ɵɵtemplate(12, NewProductComponent_option_12_Template, 2, 2, \"option\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(13, NewProductComponent_div_13_Template, 2, 0, \"div\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"div\", 12)(15, \"label\", 8);\n      i0.ɵɵtext(16, \"Nomi\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(17, \"input\", 13);\n      i0.ɵɵtemplate(18, NewProductComponent_div_18_Template, 2, 0, \"div\", 11);\n      i0.ɵɵtemplate(19, NewProductComponent_div_19_Template, 2, 0, \"div\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"div\", 12)(21, \"label\", 8);\n      i0.ɵɵtext(22, \"Ishlab chiqarilgan joyi\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(23, \"input\", 14);\n      i0.ɵɵtemplate(24, NewProductComponent_div_24_Template, 2, 0, \"div\", 11);\n      i0.ɵɵtemplate(25, NewProductComponent_div_25_Template, 2, 0, \"div\", 11);\n      i0.ɵɵtemplate(26, NewProductComponent_div_26_Template, 2, 0, \"div\", 11);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(27, \"div\", 6)(28, \"div\", 7)(29, \"label\", 8);\n      i0.ɵɵtext(30, \"Kategoriyasi\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(31, \"select\", 15);\n      i0.ɵɵtemplate(32, NewProductComponent_option_32_Template, 2, 2, \"option\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(33, NewProductComponent_div_33_Template, 2, 0, \"div\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(34, \"div\", 12)(35, \"label\", 8);\n      i0.ɵɵtext(36, \"Izoh\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(37, \"input\", 16);\n      i0.ɵɵtemplate(38, NewProductComponent_div_38_Template, 2, 0, \"div\", 17);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(39, \"div\", 12)(40, \"label\", 8);\n      i0.ɵɵtext(41, \"Ogohlantirish soni\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(42, \"input\", 18);\n      i0.ɵɵtemplate(43, NewProductComponent_div_43_Template, 2, 0, \"div\", 11);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelement(44, \"hr\");\n      i0.ɵɵelementStart(45, \"div\", 19);\n      i0.ɵɵelement(46, \"img\", 20);\n      i0.ɵɵelementStart(47, \"a\", 21);\n      i0.ɵɵtext(48, \"Print barcode\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(49, \"div\", 5)(50, \"div\", 6)(51, \"div\", 22)(52, \"label\", 8);\n      i0.ɵɵtext(53, \"Barcode\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(54, \"input\", 23);\n      i0.ɵɵlistener(\"keydown\", function NewProductComponent_Template_input_keydown_54_listener() {\n        return ctx.scanned();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(55, NewProductComponent_div_55_Template, 2, 0, \"div\", 11);\n      i0.ɵɵtemplate(56, NewProductComponent_div_56_Template, 2, 0, \"div\", 11);\n      i0.ɵɵtemplate(57, NewProductComponent_div_57_Template, 2, 0, \"div\", 11);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(58, \"div\", 24)(59, \"button\", 25);\n      i0.ɵɵlistener(\"click\", function NewProductComponent_Template_button_click_59_listener() {\n        return ctx.focusOnScan();\n      });\n      i0.ɵɵelement(60, \"i\", 26);\n      i0.ɵɵtext(61, \"Scanerlash \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(62, \"div\", 27)(63, \"button\", 28);\n      i0.ɵɵlistener(\"click\", function NewProductComponent_Template_button_click_63_listener() {\n        return ctx.randomBarcode();\n      });\n      i0.ɵɵelement(64, \"i\", 29);\n      i0.ɵɵtext(65, \"Yangi yaratish \");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(66, \"div\", 30)(67, \"button\", 31);\n      i0.ɵɵtext(68, \" Orqaga \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(69, \"button\", 32);\n      i0.ɵɵlistener(\"click\", function NewProductComponent_Template_button_click_69_listener() {\n        return ctx.add();\n      });\n      i0.ɵɵtext(70, \" Saqlash \");\n      i0.ɵɵelementEnd()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"formGroup\", ctx.addNewForm);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngForOf\", ctx.categories);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.categoryId.errors == null ? null : ctx.categoryId.errors[\"required\"]);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.name.errors == null ? null : ctx.name.errors[\"required\"]);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.name.errors == null ? null : ctx.name.errors[\"minlength\"]);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.madeIn.errors == null ? null : ctx.madeIn.errors[\"required\"]);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.madeIn.errors == null ? null : ctx.madeIn.errors[\"minlength\"]);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.madeIn.errors == null ? null : ctx.madeIn.errors[\"maxlength\"]);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngForOf\", ctx.subcategoriesFilter);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.subcategoryId.errors == null ? null : ctx.subcategoryId.errors[\"required\"]);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.name.errors == null ? null : ctx.name.errors[\"required\"]);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"value\", 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.warningCount.errors == null ? null : ctx.warningCount.errors[\"required\"]);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(18, _c0, ctx.getCurrentBarcode()));\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngIf\", ctx.barcode.errors == null ? null : ctx.barcode.errors[\"required\"]);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.barcode.errors == null ? null : ctx.barcode.errors[\"minlength\"]);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.barcode.errors == null ? null : ctx.barcode.errors[\"maxlength\"]);\n      i0.ɵɵadvance(12);\n      i0.ɵɵproperty(\"disabled\", !ctx.addNewForm.valid);\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i6.RouterLink, i1.ɵNgNoValidate, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.SelectControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["FormControl","Validators","i0","NewProductComponent","constructor","formBuilder","subcategoryService","categoryService","productService","required","minLength","maxLength","nullValidator","group","name","categoryId","subcategoryId","description","madeIn","barcode","warningCount","adminId","ngOnInit","getAll","subscribe","data","subcategories","subcategoriesFilter","categories","focusOnScan","element","document","getElementById","focus","scanned","barcodeImgUrl","classList","remove","src","value","categorySelected","addNewForm","getRawValue","filter","s","Number","add","randomBarcode","getBarcode","controls","setValue","getCurrentBarcode","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Nodirbek\\Desktop\\ZAKAZ\\Admin\\src\\app\\components\\product\\new-product\\new-product.component.ts","C:\\Users\\Nodirbek\\Desktop\\ZAKAZ\\Admin\\src\\app\\components\\product\\new-product\\new-product.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormControl, Validators } from '@angular/forms';\nimport { Category } from 'src/app/models/Category';\nimport { Subcategory } from 'src/app/models/Subcategory';\nimport { CategoryService } from 'src/app/services/category/category.service';\nimport { ProductService } from 'src/app/services/product/product.service';\nimport { SubcategoryService } from 'src/app/services/subcategory/subcategory.service';\n\n@Component({\n  selector: 'app-new-product',\n  templateUrl: './new-product.component.html',\n  styleUrls: ['./new-product.component.css']\n})\nexport class NewProductComponent implements OnInit {\n  constructor(private formBuilder: FormBuilder,\n              private subcategoryService: SubcategoryService,\n              private categoryService: CategoryService,\n              private productService: ProductService) {}\n\n  subcategories: Subcategory[] = [];\n  subcategoriesFilter: Subcategory[] = [];\n  categories: Category[] = [];\n  barcodeIsClean: boolean = true;\n\n  ngOnInit(): void {\n    this.subcategoryService.getAll().subscribe(data => {\n      this.subcategories = data;\n      this.subcategoriesFilter = data;\n    });\n    this.categoryService.getAll().subscribe(data => this.categories = data);\n  }\n\n  name = new FormControl('', [\n    Validators.required,\n    Validators.minLength(3),\n    Validators.maxLength(100),\n  ]);\n\n  description = new FormControl('', [\n    Validators.maxLength(200),\n  ]);\n\n  madeIn = new FormControl('', [\n    Validators.required,\n    Validators.minLength(2),\n    Validators.maxLength(60),\n  ]);\n\n  barcode = new FormControl('', [\n    Validators.required,\n    Validators.minLength(10),\n    Validators.maxLength(20),\n  ]);\n\n  warningCount = new FormControl(0, [\n    Validators.required\n  ]);\n\n  adminId = new FormControl('');\n\n\n  categoryId = new FormControl('', [\n    Validators.required,\n    Validators.nullValidator,\n  ]);\n\n  subcategoryId = new FormControl('', [\n    Validators.required,\n    Validators.nullValidator,\n  ]);\n\n  public addNewForm = this.formBuilder.group({\n    name: this.name,\n    categoryId: this.categoryId,\n    subcategoryId: this.subcategoryId,\n    description: this.description,\n    madeIn: this.madeIn,\n    barcode: this.barcode,\n    warningCount: this.warningCount,\n    adminId: this.adminId\n  });\n\n  focusOnScan() {\n    var element = document.getElementById('barcodeInput') as HTMLInputElement;\n    element.focus();\n  }\n\n  scanned() {\n    var barcode = document.getElementById('barcodeInput') as HTMLInputElement;\n    var barcodeImgUrl = 'https://barcodeapi.org/api/128/';\n    barcode.classList.remove('d-none');\n    barcode.src = barcodeImgUrl + barcode.value;\n  }\n\n  categorySelected() {\n    var categoryId = this.addNewForm.getRawValue().categoryId;\n    this.subcategoriesFilter = this.subcategories.filter(s => s.categoryId == Number(categoryId))\n  }\n\n  add() {\n    this.productService.add(this.addNewForm.getRawValue())\n  }\n\n  randomBarcode() {\n    var barcode = document.getElementById('barcode') as HTMLImageElement;\n    var barcodeImgUrl = 'https://barcodeapi.org/api/128/';\n    this.productService.getBarcode().subscribe(data => {\n      barcode.classList.remove('d-none');\n      barcode.src = barcodeImgUrl + data;\n      this.addNewForm.controls.barcode.setValue(data);\n    });\n  }\n\n  getCurrentBarcode() {\n    return this.addNewForm.controls.barcode.value;\n  }\n}\n","<div class=\"container\">\n  <div class=\"card\">\n    <h3 class=\"card-header\">Yangi mahsulot qo'shish</h3>\n    <div class=\"card-body\">\n      <form [formGroup]=\"addNewForm\" class=\"modal-body\">\n        <div class=\"row\">\n          <div class=\"col-md-6\">\n            <div class=\"mb-1 mt-3\">\n              <label class=\"form-label\">Mahsulot turi</label>\n              <select class=\"form-select\" formControlName=\"categoryId\" (change)=\"categorySelected()\">\n                <option\n                  *ngFor=\"let category of categories\"\n                  value=\"{{ category.id }}\"\n                >\n                  {{ category.name }}\n                </option>\n              </select>\n              <div\n                *ngIf=\"categoryId.errors?.['required']\"\n                class=\"form-text text-danger\"\n              >\n                Mahsulot turini tanlang!\n              </div>\n            </div>\n            <div class=\"mb-3 mt-3\">\n              <label class=\"form-label\">Nomi</label>\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                placeholder=\"Mahsulot nomini kiriting\"\n                ngModel\n                formControlName=\"name\"\n              />\n              <div\n                *ngIf=\"name.errors?.['required']\"\n                class=\"form-text text-danger\"\n              >\n                Maydonni to'ldiring!\n              </div>\n              <div\n                *ngIf=\"name.errors?.['minlength']\"\n                class=\"form-text text-danger\"\n              >\n                Nom kamida 3 ta belgidan iborat bo'lishi kerak!\n              </div>\n            </div>\n            <div class=\"mb-3 mt-3\">\n              <label class=\"form-label\">Ishlab chiqarilgan joyi</label>\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                placeholder=\"Masalan: Xitoy\"\n                ngModel\n                formControlName=\"madeIn\"\n              />\n              <div\n                *ngIf=\"madeIn.errors?.['required']\"\n                class=\"form-text text-danger\"\n              >\n                Maydonni to'ldiring!\n              </div>\n              <div\n                *ngIf=\"madeIn.errors?.['minlength']\"\n                class=\"form-text text-danger\"\n              >\n                Kamida 2 ta belgidan iborat bo'lishi kerak!\n              </div>\n              <div\n                *ngIf=\"madeIn.errors?.['maxlength']\"\n                class=\"form-text text-danger\"\n              >\n                60 ta belgidan oshmasligi kerak!\n              </div>\n            </div>\n          </div>\n          <div class=\"col-md-6\">\n            <div class=\"mb-1 mt-3\">\n              <label class=\"form-label\">Kategoriyasi</label>\n              <select class=\"form-select\" formControlName=\"subcategoryId\">\n                <option\n                  value=\"{{ subcategory.id }}\"\n                  *ngFor=\"let subcategory of subcategoriesFilter\"\n                >\n                  {{ subcategory.name }}\n                </option>\n              </select>\n              <div\n                *ngIf=\"subcategoryId.errors?.['required']\"\n                class=\"form-text text-danger\"\n              >\n                Kategoriyani tanlang!\n              </div>\n            </div>\n            <div class=\"mb-3 mt-3\">\n              <label class=\"form-label\">Izoh</label>\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                placeholder=\"Mahsulotga izoh yozing\"\n                ngModel\n                formControlName=\"description\"\n              />\n              <div\n                *ngIf=\"name.errors?.['required']\"\n                class=\"form-text text-success\"\n              >\n                To'ldirish ixtiyoriy\n              </div>\n            </div>\n            <div class=\"mb-3 mt-3\">\n              <label class=\"form-label\">Ogohlantirish soni</label>\n              <input\n                type=\"number\"\n                class=\"form-control\"\n                placeholder=\"Ixtiyoriy\"\n                [value]=\"0\"\n                ngModel\n                formControlName=\"warningCount\"\n              />\n              <div\n                *ngIf=\"warningCount.errors?.['required']\"\n                class=\"form-text text-danger\"\n              >\n                Maydonni to'ldiring!\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <hr />\n\n        <div class=\"d-flex justify-content-center\">\n          <img id=\"barcode\" class=\"d-none\" height=\"120px\" width=\"auto\" alt=\"\">\n          <a [routerLink]=\"['/print', getCurrentBarcode()]\">Print barcode</a>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-md-6\">\n            <div class=\"mb-3 mt-1\">\n              <label class=\"form-label\">Barcode</label>\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                placeholder=\"000000000000\"\n                ngModel\n                id=\"barcodeInput\"\n                (keydown)=\"scanned()\"\n                formControlName=\"barcode\"\n              />\n              <div\n                *ngIf=\"barcode.errors?.['required']\"\n                class=\"form-text text-danger\"\n              >\n                Maydonni to'ldiring!\n              </div>\n              <div\n                *ngIf=\"barcode.errors?.['minlength']\"\n                class=\"form-text text-danger\"\n              >\n                Kamida 10 ta belgidan iborat bo'lishi kerak!\n              </div>\n              <div\n                *ngIf=\"barcode.errors?.['maxlength']\"\n                class=\"form-text text-danger\"\n              >\n                20 ta belgidan oshmasligi kerak!\n              </div>\n            </div>\n          </div>\n          <div class=\"col-md-2\" style=\"margin-top: 32px\">\n            <button class=\"btn btn-primary\" (click)=\"focusOnScan()\">\n              <i class=\"bi bi-upc-scan me-2\"></i>Scanerlash\n            </button>\n          </div>\n          <div class=\"col-md-3\" style=\"margin-top: 32px\">\n            <button class=\"btn btn-success\" (click)=\"randomBarcode()\">\n              <i class=\"bi bi-plus-square me-2\"></i>Yangi yaratish\n            </button>\n          </div>\n        </div>\n\n        <div class=\"modal-footer d-flex justify-content-center\">\n          <button type=\"button\" class=\"btn btn-secondary\" routerLink=\"..\">\n            Orqaga\n          </button>\n          <button\n            [disabled]=\"!addNewForm.valid\"\n            type=\"submit\"\n            class=\"btn btn-primary\"\n            (click)=\"add()\"\n          >\n            Saqlash\n          </button>\n        </div>\n      </form>\n    </div>\n  </div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}