{"ast":null,"code":"import { FormControl, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"src/app/services/subcategory/subcategory.service\";\nimport * as i3 from \"src/app/services/category/category.service\";\nimport * as i4 from \"src/app/services/product/product.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"ngx-toastr\";\nimport * as i7 from \"@angular/common\";\nfunction EditProductComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39);\n    i0.ɵɵtext(1, \" Maydonni to'ldiring! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EditProductComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39);\n    i0.ɵɵtext(1, \" Kamida 10 ta belgidan iborat bo'lishi kerak! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EditProductComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39);\n    i0.ɵɵtext(1, \" 20 ta belgidan oshmasligi kerak! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EditProductComponent_option_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 40);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const category_r14 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate(\"value\", category_r14.id);\n    i0.ɵɵproperty(\"selected\", category_r14.id == ctx_r3.product.categoryId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", category_r14.name, \" \");\n  }\n}\nfunction EditProductComponent_div_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39);\n    i0.ɵɵtext(1, \" Mahsulot turini tanlang! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EditProductComponent_div_46_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39);\n    i0.ɵɵtext(1, \" Maydonni to'ldiring! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EditProductComponent_div_47_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39);\n    i0.ɵɵtext(1, \" Nom kamida 3 ta belgidan iborat bo'lishi kerak! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EditProductComponent_div_52_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39);\n    i0.ɵɵtext(1, \" Maydonni to'ldiring! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EditProductComponent_div_53_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39);\n    i0.ɵɵtext(1, \" Kamida 2 ta belgidan iborat bo'lishi kerak! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EditProductComponent_div_54_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39);\n    i0.ɵɵtext(1, \" 60 ta belgidan oshmasligi kerak! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EditProductComponent_option_62_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 40);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const subcategory_r15 = ctx.$implicit;\n    const ctx_r10 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate(\"value\", subcategory_r15.id);\n    i0.ɵɵproperty(\"selected\", subcategory_r15.id == ctx_r10.product.subcategoryId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", subcategory_r15.name, \" \");\n  }\n}\nfunction EditProductComponent_div_63_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39);\n    i0.ɵɵtext(1, \" Kategoriyani tanlang! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EditProductComponent_div_68_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 41);\n    i0.ɵɵtext(1, \" To'ldirish ixtiyoriy \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EditProductComponent_div_73_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39);\n    i0.ɵɵtext(1, \" Maydonni to'ldiring! \");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function (a1) {\n  return [\"/print\", a1];\n};\nconst _c1 = function () {\n  return [\"/product\"];\n};\nexport class EditProductComponent {\n  constructor(formBuilder, subcategoryService, categoryService, productService, actRoute, toastr, cdr) {\n    this.formBuilder = formBuilder;\n    this.subcategoryService = subcategoryService;\n    this.categoryService = categoryService;\n    this.productService = productService;\n    this.actRoute = actRoute;\n    this.toastr = toastr;\n    this.cdr = cdr;\n    this.subcategories = [];\n    this.subcategoriesFilter = [];\n    this.categories = [];\n    this.barcodeIsClean = true;\n    this.firstInit = false;\n    this.product = {\n      id: 0,\n      name: '',\n      description: '',\n      madeIn: '',\n      barcode: '',\n      warningCount: 0,\n      subcategoryId: 0,\n      subcategoryName: '',\n      categoryId: 0,\n      categoryName: '',\n      adminId: '',\n      adminFullName: ''\n    };\n    this.productId = 0;\n    this.id = new FormControl(this.productId);\n    this.name = new FormControl(this.product.name, [Validators.required, Validators.minLength(3), Validators.maxLength(100)]);\n    this.description = new FormControl(this.product.description, [Validators.maxLength(200)]);\n    this.madeIn = new FormControl(this.product.madeIn, [Validators.required, Validators.minLength(2), Validators.maxLength(60)]);\n    this.barcode = new FormControl(this.product.barcode, [Validators.required, Validators.minLength(10), Validators.maxLength(20)]);\n    this.warningCount = new FormControl(this.product.warningCount, [Validators.required]);\n    this.adminId = new FormControl(this.product.adminId);\n    this.categoryId = new FormControl(this.product.categoryId, [Validators.required, Validators.nullValidator]);\n    this.subcategoryId = new FormControl(this.product.subcategoryId, [Validators.required, Validators.nullValidator]);\n    this.editForm = this.formBuilder.group({\n      id: this.productId,\n      name: this.name,\n      categoryId: this.categoryId,\n      subcategoryId: this.subcategoryId,\n      description: this.description,\n      madeIn: this.madeIn,\n      barcode: this.barcode,\n      warningCount: this.warningCount,\n      adminId: this.adminId\n    });\n  }\n  ngOnInit() {\n    const routeParams = this.actRoute.snapshot.paramMap;\n    this.productId = Number(routeParams.get('productId') ?? \"\");\n    this.categoryService.getAll().subscribe(data => {\n      this.categories = data;\n    });\n    this.productService.getById(this.productId).subscribe(data => {\n      this.product = data;\n      this.setBarcode(this.product.barcode);\n    });\n    this.subcategoryService.getAll().subscribe(data => {\n      this.subcategories = data;\n      this.subcategoriesFilter = this.subcategories;\n    });\n  }\n  update() {\n    var barcodeInput = document.getElementById('barcodeInput');\n    var name = document.getElementById('name');\n    var description = document.getElementById('description');\n    var madeIn = document.getElementById('madeIn');\n    var warningCount = document.getElementById('warningCount');\n    this.editForm.controls.barcode.setValue(barcodeInput.value);\n    this.editForm.controls.name.setValue(name.value);\n    this.editForm.controls.description.setValue(description.value);\n    this.editForm.controls.madeIn.setValue(madeIn.value);\n    this.editForm.controls.warningCount.setValue(Number(warningCount.value));\n    this.editForm.controls.id.setValue(this.productId);\n    if (this.editForm.getRawValue().categoryId == 0) {\n      this.editForm.controls.categoryId.setValue(this.product.categoryId);\n      this.editForm.controls.subcategoryId.setValue(this.product.subcategoryId);\n    }\n    let hasChanges = true;\n    if (hasChanges) {\n      this.productService.edit(this.editForm.getRawValue());\n    }\n  }\n  focusOnScan() {\n    var element = document.getElementById('barcodeInput');\n    element.focus();\n    this.saveBarcode('');\n  }\n  scanned(event) {\n    if (event.keyCode === 13) {\n      event.preventDefault();\n      var barcode = document.getElementById('barcodeInput');\n      this.setBarcode(barcode.value);\n    }\n  }\n  categorySelected() {\n    var categoryId = this.editForm.getRawValue().categoryId;\n    this.subcategoriesFilter = this.subcategories.filter(s => s.categoryId == Number(categoryId));\n    console.log(this.subcategoriesFilter);\n  }\n  subcategorySelected() {}\n  randomBarcode() {\n    this.productService.getBarcode().subscribe(data => {\n      if (data) {\n        this.setBarcode(data);\n        this.editForm.controls.barcode.setValue(data.toString());\n        this.toastr.success(\"Barcode yaratildi!\");\n        this.saveBarcode(data);\n      } else {\n        this.toastr.error(\"Xatolik yuz berdi!\");\n      }\n    });\n  }\n  getCurrentBarcode() {\n    return this.editForm.controls.barcode.value;\n  }\n  clearBarcode() {\n    var src = 'assets/images/barcode0.png';\n    var barcodeimg = document.getElementById('barcode');\n    barcodeimg.src = src;\n    this.editForm.controls.barcode.setValue('');\n    this.saveBarcode('');\n  }\n  setBarcode(barcode) {\n    var barcodeImgUrl = 'https://barcodeapi.org/api/128/';\n    var barcodeimg = document.getElementById('barcode');\n    barcodeimg.src = barcodeImgUrl + barcode;\n    this.saveBarcode(barcode);\n  }\n  saveBarcode(barcode) {\n    localStorage.setItem('barcode', barcode);\n  }\n  getSavedBarcode() {\n    return localStorage.getItem('barcode');\n  }\n}\nEditProductComponent.ɵfac = function EditProductComponent_Factory(t) {\n  return new (t || EditProductComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.SubcategoryService), i0.ɵɵdirectiveInject(i3.CategoryService), i0.ɵɵdirectiveInject(i4.ProductService), i0.ɵɵdirectiveInject(i5.ActivatedRoute), i0.ɵɵdirectiveInject(i6.ToastrService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n};\nEditProductComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: EditProductComponent,\n  selectors: [[\"app-edit-product\"]],\n  decls: 79,\n  vars: 26,\n  consts: [[1, \"container\"], [1, \"card\"], [1, \"card-header\"], [1, \"card-body\"], [1, \"modal-body\", 3, \"formGroup\"], [1, \"row\", \"mb-4\"], [1, \"col-md-6\"], [1, \"mb-3\", \"mt-1\"], [1, \"form-label\"], [\"type\", \"text\", \"ngModel\", \"\", \"id\", \"barcodeInput\", \"formControlName\", \"barcode\", 1, \"form-control\", 3, \"value\", \"keydown\"], [\"class\", \"form-text text-danger\", 4, \"ngIf\"], [1, \"d-flex\", \"justify-content-center\"], [1, \"btn\", \"btn-primary\", \"mx-2\", 3, \"click\"], [1, \"bi\", \"bi-upc-scan\", \"me-2\"], [1, \"btn\", \"btn-success\", \"mx-2\", 3, \"click\"], [1, \"bi\", \"bi-plus-square\", \"me-2\"], [1, \"col-md-6\", 2, \"margin-top\", \"10px\"], [\"id\", \"printDiv\"], [\"id\", \"barcode\", \"src\", \"assets/images/barcode0.png\", \"height\", \"120px\", \"width\", \"auto\", \"alt\", \"\"], [1, \"d-flex\", \"justify-content-center\", \"mt-3\", \"links\"], [1, \"btn\", \"btn-secondary\", 3, \"click\"], [1, \"bi\", \"bi-arrow-counterclockwise\", \"me-2\"], [1, \"btn\", \"btn-success\", 3, \"routerLink\"], [1, \"bi\", \"bi-printer-fill\", \"me-2\"], [1, \"row\"], [1, \"mb-1\", \"mt-3\"], [\"formControlName\", \"categoryId\", \"id\", \"category\", 1, \"form-select\", 3, \"change\"], [3, \"value\", \"selected\", 4, \"ngFor\", \"ngForOf\"], [1, \"mb-3\", \"mt-3\"], [\"type\", \"text\", \"id\", \"name\", \"ngModel\", \"\", \"formControlName\", \"name\", 1, \"form-control\", 3, \"value\"], [\"type\", \"text\", \"id\", \"madeIn\", \"ngModel\", \"\", \"formControlName\", \"madeIn\", 1, \"form-control\", 3, \"value\"], [\"formControlName\", \"subcategoryId\", 1, \"form-select\", 3, \"change\"], [\"value\", \"null\", \"disabled\", \"\"], [\"type\", \"text\", \"id\", \"description\", \"ngModel\", \"\", \"formControlName\", \"description\", 1, \"form-control\", 3, \"value\"], [\"class\", \"form-text text-success\", 4, \"ngIf\"], [\"type\", \"number\", \"id\", \"warningCount\", \"ngModel\", \"\", \"formControlName\", \"warningCount\", 1, \"form-control\", 3, \"value\"], [1, \"modal-footer\", \"d-flex\", \"justify-content-center\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", 3, \"routerLink\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [1, \"form-text\", \"text-danger\"], [3, \"value\", \"selected\"], [1, \"form-text\", \"text-success\"]],\n  template: function EditProductComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h3\", 2);\n      i0.ɵɵtext(3, \"Yangi mahsulot qo'shish\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 3)(5, \"form\", 4)(6, \"div\", 5)(7, \"div\", 6)(8, \"div\", 7)(9, \"label\", 8);\n      i0.ɵɵtext(10, \"Barcode\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"input\", 9);\n      i0.ɵɵlistener(\"keydown\", function EditProductComponent_Template_input_keydown_11_listener($event) {\n        return ctx.scanned($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(12, EditProductComponent_div_12_Template, 2, 0, \"div\", 10);\n      i0.ɵɵtemplate(13, EditProductComponent_div_13_Template, 2, 0, \"div\", 10);\n      i0.ɵɵtemplate(14, EditProductComponent_div_14_Template, 2, 0, \"div\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"div\", 11)(16, \"button\", 12);\n      i0.ɵɵlistener(\"click\", function EditProductComponent_Template_button_click_16_listener() {\n        return ctx.focusOnScan();\n      });\n      i0.ɵɵelement(17, \"i\", 13);\n      i0.ɵɵtext(18, \"Scanerlash \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"button\", 14);\n      i0.ɵɵlistener(\"click\", function EditProductComponent_Template_button_click_19_listener() {\n        return ctx.randomBarcode();\n      });\n      i0.ɵɵelement(20, \"i\", 15);\n      i0.ɵɵtext(21, \"Yangi yaratish \");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(22, \"div\", 16)(23, \"div\", 17)(24, \"div\", 11);\n      i0.ɵɵelement(25, \"img\", 18);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"div\", 19)(27, \"a\", 20);\n      i0.ɵɵlistener(\"click\", function EditProductComponent_Template_a_click_27_listener() {\n        return ctx.clearBarcode();\n      });\n      i0.ɵɵelement(28, \"i\", 21);\n      i0.ɵɵtext(29, \" Tozalash\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"a\", 22);\n      i0.ɵɵelement(31, \"i\", 23);\n      i0.ɵɵtext(32, \" Print\");\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelement(33, \"hr\");\n      i0.ɵɵelementStart(34, \"div\", 24)(35, \"div\", 6)(36, \"div\", 25)(37, \"label\", 8);\n      i0.ɵɵtext(38, \"Mahsulot turi\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(39, \"select\", 26);\n      i0.ɵɵlistener(\"change\", function EditProductComponent_Template_select_change_39_listener() {\n        return ctx.categorySelected();\n      });\n      i0.ɵɵtemplate(40, EditProductComponent_option_40_Template, 2, 3, \"option\", 27);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(41, EditProductComponent_div_41_Template, 2, 0, \"div\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(42, \"div\", 28)(43, \"label\", 8);\n      i0.ɵɵtext(44, \"Nomi\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(45, \"input\", 29);\n      i0.ɵɵtemplate(46, EditProductComponent_div_46_Template, 2, 0, \"div\", 10);\n      i0.ɵɵtemplate(47, EditProductComponent_div_47_Template, 2, 0, \"div\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(48, \"div\", 28)(49, \"label\", 8);\n      i0.ɵɵtext(50, \"Ishlab chiqarilgan joyi\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(51, \"input\", 30);\n      i0.ɵɵtemplate(52, EditProductComponent_div_52_Template, 2, 0, \"div\", 10);\n      i0.ɵɵtemplate(53, EditProductComponent_div_53_Template, 2, 0, \"div\", 10);\n      i0.ɵɵtemplate(54, EditProductComponent_div_54_Template, 2, 0, \"div\", 10);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(55, \"div\", 6)(56, \"div\", 25)(57, \"label\", 8);\n      i0.ɵɵtext(58, \"Kategoriyasi\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(59, \"select\", 31);\n      i0.ɵɵlistener(\"change\", function EditProductComponent_Template_select_change_59_listener() {\n        return ctx.subcategorySelected();\n      });\n      i0.ɵɵelementStart(60, \"option\", 32);\n      i0.ɵɵtext(61, \" -- Kategoriyani tanlang -- \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(62, EditProductComponent_option_62_Template, 2, 3, \"option\", 27);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(63, EditProductComponent_div_63_Template, 2, 0, \"div\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(64, \"div\", 28)(65, \"label\", 8);\n      i0.ɵɵtext(66, \"Izoh\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(67, \"input\", 33);\n      i0.ɵɵtemplate(68, EditProductComponent_div_68_Template, 2, 0, \"div\", 34);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(69, \"div\", 28)(70, \"label\", 8);\n      i0.ɵɵtext(71, \"Ogohlantirish soni\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(72, \"input\", 35);\n      i0.ɵɵtemplate(73, EditProductComponent_div_73_Template, 2, 0, \"div\", 10);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(74, \"div\", 36)(75, \"button\", 37);\n      i0.ɵɵtext(76, \" Orqaga \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(77, \"button\", 38);\n      i0.ɵɵlistener(\"click\", function EditProductComponent_Template_button_click_77_listener() {\n        return ctx.update();\n      });\n      i0.ɵɵtext(78, \" Saqlash \");\n      i0.ɵɵelementEnd()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"formGroup\", ctx.editForm);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"value\", ctx.product.barcode);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", (ctx.barcode.errors == null ? null : ctx.barcode.errors[\"required\"]) && ctx.firstInit);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.barcode.errors == null ? null : ctx.barcode.errors[\"minlength\"]);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.barcode.errors == null ? null : ctx.barcode.errors[\"maxlength\"]);\n      i0.ɵɵadvance(16);\n      i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(23, _c0, ctx.getCurrentBarcode()));\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngForOf\", ctx.categories);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.categoryId.errors == null ? null : ctx.categoryId.errors[\"required\"]);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"value\", ctx.product.name);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", (ctx.name.errors == null ? null : ctx.name.errors[\"required\"]) && ctx.firstInit);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.name.errors == null ? null : ctx.name.errors[\"minlength\"]);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"value\", ctx.product.madeIn);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", (ctx.madeIn.errors == null ? null : ctx.madeIn.errors[\"required\"]) && ctx.firstInit);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.madeIn.errors == null ? null : ctx.madeIn.errors[\"minlength\"]);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.madeIn.errors == null ? null : ctx.madeIn.errors[\"maxlength\"]);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngForOf\", ctx.subcategoriesFilter);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.subcategoryId.errors == null ? null : ctx.subcategoryId.errors[\"required\"]);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"value\", ctx.product.description);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", (ctx.name.errors == null ? null : ctx.name.errors[\"required\"]) && ctx.firstInit);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"value\", ctx.product.warningCount);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", (ctx.warningCount.errors == null ? null : ctx.warningCount.errors[\"required\"]) && ctx.firstInit);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(25, _c1));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", !ctx.editForm.valid && ctx.firstInit);\n    }\n  },\n  dependencies: [i7.NgForOf, i7.NgIf, i5.RouterLink, i1.ɵNgNoValidate, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.SelectControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["FormControl","Validators","i0","EditProductComponent","constructor","formBuilder","subcategoryService","categoryService","productService","actRoute","toastr","cdr","id","name","description","madeIn","barcode","warningCount","subcategoryId","subcategoryName","categoryId","categoryName","adminId","adminFullName","productId","product","required","minLength","maxLength","nullValidator","group","ngOnInit","routeParams","snapshot","paramMap","Number","get","getAll","subscribe","data","categories","getById","setBarcode","subcategories","subcategoriesFilter","update","barcodeInput","document","getElementById","editForm","controls","setValue","value","getRawValue","hasChanges","edit","focusOnScan","element","focus","saveBarcode","scanned","event","keyCode","preventDefault","categorySelected","filter","s","console","log","subcategorySelected","randomBarcode","getBarcode","toString","success","error","getCurrentBarcode","clearBarcode","src","barcodeimg","barcodeImgUrl","localStorage","setItem","getSavedBarcode","getItem","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Nodirbek\\Desktop\\ZAKAZ\\Admin\\src\\app\\components\\product\\edit-product\\edit-product.component.ts","C:\\Users\\Nodirbek\\Desktop\\ZAKAZ\\Admin\\src\\app\\components\\product\\edit-product\\edit-product.component.html"],"sourcesContent":["import { AfterViewInit, ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormControl, Validators } from '@angular/forms';\nimport { ActivatedRoute } from '@angular/router';\nimport { ToastrService } from 'ngx-toastr';\nimport { Category } from 'src/app/models/Category';\nimport { Product } from 'src/app/models/Product';\nimport { Subcategory } from 'src/app/models/Subcategory';\nimport { CategoryService } from 'src/app/services/category/category.service';\nimport { ProductService } from 'src/app/services/product/product.service';\nimport { SubcategoryService } from 'src/app/services/subcategory/subcategory.service';\n\n@Component({\n  selector: 'app-edit-product',\n  templateUrl: './edit-product.component.html',\n  styleUrls: ['./edit-product.component.css']\n})\nexport class EditProductComponent implements OnInit {\n  constructor(private formBuilder: FormBuilder,\n    private subcategoryService: SubcategoryService,\n    private categoryService: CategoryService,\n    private productService: ProductService,\n    private actRoute: ActivatedRoute,\n    private toastr: ToastrService,\n    private cdr: ChangeDetectorRef) {}\n\n  subcategories: Subcategory[] = [];\n  subcategoriesFilter: Subcategory[] = [];\n  categories: Category[] = [];\n  barcodeIsClean: boolean = true;\n  firstInit: boolean = false;\n  product: Product = {\n    id: 0,\n    name: '',\n    description: '',\n    madeIn: '',\n    barcode: '',\n    warningCount: 0,\n    subcategoryId: 0,\n    subcategoryName: '',\n    categoryId: 0,\n    categoryName: '',\n    adminId: '',\n    adminFullName: '',\n  };\n  productId: number = 0;\n\n  ngOnInit(): void {\n    const routeParams = this.actRoute.snapshot.paramMap;\n    this.productId = Number(routeParams.get('productId')??\"\");\n    this.categoryService.getAll().subscribe(data => {\n      this.categories = data;\n    });\n    this.productService.getById(this.productId).subscribe(data => {\n      this.product = data;\n      this.setBarcode(this.product.barcode);\n    });\n    this.subcategoryService.getAll().subscribe(data => {\n      this.subcategories = data;\n      this.subcategoriesFilter = this.subcategories;\n    });\n  }\n\n  id = new FormControl(this.productId);\n\n  name = new FormControl(this.product.name, [\n    Validators.required,\n    Validators.minLength(3),\n    Validators.maxLength(100),\n  ]);\n\n  description = new FormControl(this.product.description, [\n    Validators.maxLength(200),\n  ]);\n\n  madeIn = new FormControl(this.product.madeIn, [\n    Validators.required,\n    Validators.minLength(2),\n    Validators.maxLength(60),\n  ]);\n\n  barcode = new FormControl(this.product.barcode, [\n    Validators.required,\n    Validators.minLength(10),\n    Validators.maxLength(20),\n  ]);\n\n  warningCount = new FormControl(this.product.warningCount, [\n    Validators.required\n  ]);\n\n  adminId = new FormControl(this.product.adminId);\n\n\n  categoryId = new FormControl(this.product.categoryId, [\n    Validators.required,\n    Validators.nullValidator,\n  ]);\n\n  subcategoryId = new FormControl(this.product.subcategoryId, [\n    Validators.required,\n    Validators.nullValidator,\n  ]);\n\n  public editForm = this.formBuilder.group({\n    id: this.productId,\n    name: this.name,\n    categoryId: this.categoryId,\n    subcategoryId: this.subcategoryId,\n    description: this.description,\n    madeIn: this.madeIn,\n    barcode: this.barcode,\n    warningCount: this.warningCount,\n    adminId: this.adminId\n  });\n\n  update() {\n    var barcodeInput = document.getElementById('barcodeInput') as HTMLInputElement;\n    var name = document.getElementById('name') as HTMLInputElement;\n    var description = document.getElementById('description') as HTMLInputElement;\n    var madeIn = document.getElementById('madeIn') as HTMLInputElement;\n    var warningCount = document.getElementById('warningCount') as HTMLInputElement;\n    this.editForm.controls.barcode.setValue(barcodeInput.value);\n    this.editForm.controls.name.setValue(name.value);\n    this.editForm.controls.description.setValue(description.value);\n    this.editForm.controls.madeIn.setValue(madeIn.value);\n    this.editForm.controls.warningCount.setValue(Number(warningCount.value));\n    this.editForm.controls.id.setValue(this.productId);\n    if (this.editForm.getRawValue().categoryId == 0 ) {\n      this.editForm.controls.categoryId.setValue(this.product.categoryId);\n      this.editForm.controls.subcategoryId.setValue(this.product.subcategoryId);\n    }\n\n    let hasChanges = true;\n    if (hasChanges) {\n      this.productService.edit(this.editForm.getRawValue());\n    }\n  }\n\n\n  focusOnScan() {\n    var element = document.getElementById('barcodeInput') as HTMLInputElement;\n    element.focus();\n    this.saveBarcode('');\n  }\n\n  scanned(event: any) {\n    if(event.keyCode === 13){\n      event.preventDefault();\n      var barcode = document.getElementById('barcodeInput') as HTMLInputElement;\n      this.setBarcode(barcode.value)\n    }\n  }\n\n  categorySelected() {\n    var categoryId = this.editForm.getRawValue().categoryId;\n    this.subcategoriesFilter = this.subcategories.filter(s => s.categoryId == Number(categoryId))\n    console.log(this.subcategoriesFilter)\n  }\n\n  subcategorySelected() {\n    \n  }\n\n  randomBarcode() {\n    this.productService.getBarcode().subscribe(data => {\n      if (data) {\n        this.setBarcode(data)\n        this.editForm.controls.barcode.setValue(data.toString());\n        this.toastr.success(\"Barcode yaratildi!\");\n        this.saveBarcode(data);\n      }\n      else {\n        this.toastr.error(\"Xatolik yuz berdi!\");\n      }\n    });\n  }\n\n  getCurrentBarcode() {\n    return this.editForm.controls.barcode.value;\n  }\n\n  clearBarcode() {\n    var src = 'assets/images/barcode0.png';\n    var barcodeimg = document.getElementById('barcode') as HTMLImageElement\n    barcodeimg.src = src;\n    this.editForm.controls.barcode.setValue('');\n    this.saveBarcode('');\n  }\n\n  setBarcode(barcode: string) {\n    var barcodeImgUrl = 'https://barcodeapi.org/api/128/';\n    var barcodeimg = document.getElementById('barcode') as HTMLImageElement\n    barcodeimg.src = barcodeImgUrl + barcode;\n    this.saveBarcode(barcode);\n  }\n\n  saveBarcode(barcode: string) {\n    localStorage.setItem('barcode', barcode);\n  }\n\n  getSavedBarcode() {\n    return localStorage.getItem('barcode')\n  }\n}\n","<div class=\"container\">\n  <div class=\"card\">\n    <h3 class=\"card-header\">Yangi mahsulot qo'shish</h3>\n    <div class=\"card-body\">\n      <form [formGroup]=\"editForm\" class=\"modal-body\">\n        <div class=\"row mb-4\">\n          <div class=\"col-md-6\">\n            <div class=\"mb-3 mt-1\">\n              <label class=\"form-label\">Barcode</label>\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                [value]=\"product.barcode\"\n                ngModel\n                id=\"barcodeInput\"\n                (keydown)=\"scanned($event)\"\n                formControlName=\"barcode\"\n              />\n              <div\n                *ngIf=\"barcode.errors?.['required']&&firstInit\"\n                class=\"form-text text-danger\"\n              >\n                Maydonni to'ldiring!\n              </div>\n              <div\n                *ngIf=\"barcode.errors?.['minlength']\"\n                class=\"form-text text-danger\"\n              >\n                Kamida 10 ta belgidan iborat bo'lishi kerak!\n              </div>\n              <div\n                *ngIf=\"barcode.errors?.['maxlength']\"\n                class=\"form-text text-danger\"\n              >\n                20 ta belgidan oshmasligi kerak!\n              </div>\n            </div>\n            <div class=\"d-flex justify-content-center\">\n              <button class=\"btn btn-primary mx-2\" (click)=\"focusOnScan()\">\n                <i class=\"bi bi-upc-scan me-2\"></i>Scanerlash\n              </button>\n              <button class=\"btn btn-success mx-2\" (click)=\"randomBarcode()\">\n                <i class=\"bi bi-plus-square me-2\"></i>Yangi yaratish\n              </button>\n            </div>\n          </div>\n          <div class=\"col-md-6\" style=\"margin-top: 10px\">\n            <div id=\"printDiv\">\n              <div class=\"d-flex justify-content-center\">\n                <img\n                  id=\"barcode\"\n                  src=\"assets/images/barcode0.png\"\n                  height=\"120px\"\n                  width=\"auto\"\n                  alt=\"\"\n                />\n              </div>\n              <div class=\"d-flex justify-content-center mt-3 links\">\n                <a class=\"btn btn-secondary\" (click)=\"clearBarcode()\"\n                  ><i class=\"bi bi-arrow-counterclockwise me-2\"></i> Tozalash</a\n                >\n                <a\n                  [routerLink]=\"['/print', getCurrentBarcode()]\"\n                  class=\"btn btn-success\"\n                  ><i class=\"bi bi-printer-fill me-2\"></i> Print</a\n                >\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <hr />\n\n        <div class=\"row\">\n          <div class=\"col-md-6\">\n            <div class=\"mb-1 mt-3\">\n              <label class=\"form-label\">Mahsulot turi</label>\n              <select\n                class=\"form-select\"\n                formControlName=\"categoryId\"\n                id=\"category\"\n                (change)=\"categorySelected()\"\n              >\n                <option\n                  *ngFor=\"let category of categories\"\n                  value=\"{{ category.id }}\"\n                  [selected]=\"category.id == product.categoryId\"\n                >\n                  {{ category.name }}\n                </option>\n              </select>\n              <div\n                *ngIf=\"categoryId.errors?.['required']\"\n                class=\"form-text text-danger\"\n              >\n                Mahsulot turini tanlang!\n              </div>\n            </div>\n            <div class=\"mb-3 mt-3\">\n              <label class=\"form-label\">Nomi</label>\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                id=\"name\"\n                [value]=\"product.name\"\n                ngModel\n                formControlName=\"name\"\n              />\n              <div\n                *ngIf=\"name.errors?.['required']&&firstInit\"\n                class=\"form-text text-danger\"\n              >\n                Maydonni to'ldiring!\n              </div>\n              <div\n                *ngIf=\"name.errors?.['minlength']\"\n                class=\"form-text text-danger\"\n              >\n                Nom kamida 3 ta belgidan iborat bo'lishi kerak!\n              </div>\n            </div>\n            <div class=\"mb-3 mt-3\">\n              <label class=\"form-label\">Ishlab chiqarilgan joyi</label>\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                id=\"madeIn\"\n                [value]=\"product.madeIn\"\n                ngModel\n                formControlName=\"madeIn\"\n              />\n              <div\n                *ngIf=\"madeIn.errors?.['required']&&firstInit\"\n                class=\"form-text text-danger\"\n              >\n                Maydonni to'ldiring!\n              </div>\n              <div\n                *ngIf=\"madeIn.errors?.['minlength']\"\n                class=\"form-text text-danger\"\n              >\n                Kamida 2 ta belgidan iborat bo'lishi kerak!\n              </div>\n              <div\n                *ngIf=\"madeIn.errors?.['maxlength']\"\n                class=\"form-text text-danger\"\n              >\n                60 ta belgidan oshmasligi kerak!\n              </div>\n            </div>\n          </div>\n          <div class=\"col-md-6\">\n            <div class=\"mb-1 mt-3\">\n              <label class=\"form-label\">Kategoriyasi</label>\n              <select\n                class=\"form-select\"\n                formControlName=\"subcategoryId\"\n                (change)=\"subcategorySelected()\"\n              >\n                <option value=\"null\" disabled>\n                  -- Kategoriyani tanlang --\n                </option>\n                <option\n                  value=\"{{ subcategory.id }}\"\n                  *ngFor=\"let subcategory of subcategoriesFilter\"\n                  [selected]=\"subcategory.id == product.subcategoryId\"\n                >\n                  {{ subcategory.name }}\n                </option>\n              </select>\n              <div\n                *ngIf=\"subcategoryId.errors?.['required']\"\n                class=\"form-text text-danger\"\n              >\n                Kategoriyani tanlang!\n              </div>\n            </div>\n            <div class=\"mb-3 mt-3\">\n              <label class=\"form-label\">Izoh</label>\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                [value]=\"product.description\"\n                id=\"description\"\n                ngModel\n                formControlName=\"description\"\n              />\n              <div\n                *ngIf=\"name.errors?.['required']&&firstInit\"\n                class=\"form-text text-success\"\n              >\n                To'ldirish ixtiyoriy\n              </div>\n            </div>\n            <div class=\"mb-3 mt-3\">\n              <label class=\"form-label\">Ogohlantirish soni</label>\n              <input\n                type=\"number\"\n                class=\"form-control\"\n                id=\"warningCount\"\n                ngModel\n                [value]=\"product.warningCount\"\n                formControlName=\"warningCount\"\n              />\n              <div\n                *ngIf=\"warningCount.errors?.['required']&&firstInit\"\n                class=\"form-text text-danger\"\n              >\n                Maydonni to'ldiring!\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"modal-footer d-flex justify-content-center\">\n          <button\n            type=\"button\"\n            class=\"btn btn-secondary\"\n            [routerLink]=\"['/product']\"\n          >\n            Orqaga\n          </button>\n          <button\n            [disabled]=\"!editForm.valid && firstInit\"\n            type=\"submit\"\n            class=\"btn btn-primary\"\n            (click)=\"update()\"\n          >\n            Saqlash\n          </button>\n        </div>\n      </form>\n    </div>\n  </div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}